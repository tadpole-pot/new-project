<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>everyday experiment</title>
    <style>
        /* 画像のスタイル */
        .draggable {
            width: 100px;  /* 画像のサイズ */
            height: auto; 
            position: absolute; /* 位置を自由に変更 */
            cursor: grab;
        }
    </style>
</head>
<body>

    <!-- ドラッグ可能な画像 -->
    <img src="images/image1.png" class="draggable" style="top: 100px; left: 50px;">
    <img src="images/image2.png" class="draggable" style="top: 200px; left: 150px;">
    <img src="images/image3.png" class="draggable" style="top: 300px; left: 250px;">

    <!-- JavaScriptのコード（</body>の直前に置く） -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const images = document.querySelectorAll(".draggable");
            let activeImage = null;
            let offsetX = 0, offsetY = 0;

            images.forEach(img => {
                img.style.position = "absolute"; // 画像を自由に動かせるようにする

                // マウス用イベント
                img.addEventListener("mousedown", startDrag);
                document.addEventListener("mousemove", onDrag);
                document.addEventListener("mouseup", endDrag);

                // タッチ用イベント
                img.addEventListener("touchstart", startDrag, { passive: false });
                document.addEventListener("touchmove", onDrag, { passive: false });
                document.addEventListener("touchend", endDrag);
            });

            function startDrag(event) {
                event.preventDefault(); // スクロールを防ぐ
                activeImage = event.target;

                if (event.type === "mousedown") {
                    offsetX = event.clientX - activeImage.offsetLeft;
                    offsetY = event.clientY - activeImage.offsetTop;
                } else if (event.type === "touchstart") {
                    const touch = event.touches[0];
                    offsetX = touch.clientX - activeImage.offsetLeft;
                    offsetY = touch.clientY - activeImage.offsetTop;
                }
            }

            function onDrag(event) {
                if (!activeImage) return;

                let x, y;
                if (event.type === "mousemove") {
                    x = event.clientX - offsetX;
                    y = event.clientY - offsetY;
                } else if (event.type === "touchmove") {
                    event.preventDefault(); // スクロールを防ぐ
                    const touch = event.touches[0];
                    x = touch.clientX - offsetX;
                    y = touch.clientY - offsetY;
                }

                activeImage.style.left = `${x}px`;
                activeImage.style.top = `${y}px`;
            }

            function endDrag() {
                activeImage = null;
            }
        });
    </script>

</body>
</html>
